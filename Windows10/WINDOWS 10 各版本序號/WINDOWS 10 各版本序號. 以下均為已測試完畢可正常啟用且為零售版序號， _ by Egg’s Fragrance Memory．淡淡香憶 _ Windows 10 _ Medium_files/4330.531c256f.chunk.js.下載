(self.webpackChunklite=self.webpackChunklite||[]).push([[4330],{66802:(e,t,n)=>{"use strict";n.d(t,{R4:()=>i,Ue:()=>l,xG:()=>s,Hp:()=>o});var r=n(93661),i=function(e,t,n){var r,i;return"undefined"!=typeof window&&e&&t&&!!(window.ApplePaySession&&null!==(r=window.ApplePaySession)&&void 0!==r&&r.supportsVersion(n)&&null!==(i=window.ApplePaySession)&&void 0!==i&&i.canMakePayments())},l=function(e,t){var n="";switch(t){case"CA":return e===r.FM.Monthly&&(n="monthlyCad"),e===r.FM.Yearly&&(n="yearlyCad"),n;default:return n}};function s(e){var t=e.amount,n=e.currency,r=e.locale,i=e.floatingDigits,l=void 0===i?[2,2]:i,s=e.isLongFormat,o=void 0!==s&&s,a=r||"undefined"!=typeof window&&window.navigator.language||"en-US",u=n||"USD";if(!Intl)return"".concat(t," ").concat(u);try{var c=new Intl.NumberFormat(a,{style:"currency",currency:u,minimumFractionDigits:l[0],maximumFractionDigits:l[1],currencyDisplay:"narrowSymbol"}).format(t);return o?"".concat(c," ").concat(n):c}catch(e){return String(t)}}var o=function(e,t,n){var r=String(e);return n?"".concat(r," ").concat(t):r}},76107:(e,t,n)=>{"use strict";n.d(t,{b:()=>r});var r={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"MembershipUpsellModal_user"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"imageId"}},{kind:"Field",name:{kind:"Name",value:"postSubscribeMembershipUpsellShownAt"}},{kind:"Field",name:{kind:"Name",value:"newsletterV3"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}}]}}]}},61279:(e,t,n)=>{"use strict";n.d(t,{DI:()=>C,nj:()=>T,oT:()=>F});var r=n(59713),i=n.n(r),l=n(63038),s=n.n(l),o=n(28655),a=n.n(o),u=n(82492),c=n.n(u),d=n(92471),m=n(21919),v=n(67294),p=n(25735),b=n(9354),f=n(75880),w=n(18627),h=n(66411),S=n(78285);function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function E(){var e=a()(["\n  mutation fetchOrLazilyCreateNewsletterV3AndMaybeSubscribe($userId: ID!) {\n    fetchOrLazilyCreateNewsletterV3AndMaybeSubscribe(userId: $userId) {\n      __typename\n      ...useNewsletterV3Subscription_newsletterV3\n    }\n  }\n  ","\n"]);return E=function(){return e},e}function V(){var e=a()(["\n  mutation unsubscribeNewsletterV3($newsletterV3Id: ID!) {\n    unsubscribeNewsletterV3(newsletterV3Id: $newsletterV3Id)\n  }\n"]);return V=function(){return e},e}function x(){var e=a()(["\n  mutation subscribeNewsletterV3($newsletterV3Id: ID!, $shouldRecordConsent: Boolean) {\n    subscribeNewsletterV3(\n      newsletterV3Id: $newsletterV3Id\n      shouldRecordConsent: $shouldRecordConsent\n    )\n  }\n"]);return x=function(){return e},e}function k(){var e=a()(["\n  fragment useNewsletterV3Subscription_newsletterV3_viewerEdge on NewsletterV3 {\n    viewerEdge {\n      id\n      isSubscribed\n    }\n  }\n"]);return k=function(){return e},e}function P(){var e=a()(["\n  fragment useNewsletterV3Subscription_user on User {\n    id\n    username\n    newsletterV3 {\n      ...useNewsletterV3Subscription_newsletterV3\n    }\n  }\n  ","\n"]);return P=function(){return e},e}function M(){var e=a()(["\n  fragment useNewsletterV3Subscription_newsletterV3 on NewsletterV3 {\n    id\n    type\n    slug\n    name\n    collection {\n      slug\n    }\n    user {\n      id\n      name\n      username\n      newsletterV3 {\n        id\n      }\n    }\n  }\n"]);return M=function(){return e},e}var C=(0,d.Ps)(M()),T=(0,d.Ps)(P(),C),I=((0,d.Ps)(k()),(0,d.Ps)(x())),N=(0,d.Ps)(V()),D=(0,d.Ps)(E(),C),F=function(e){var t=e.newsletterV3,n=e.creator,r=e.newsletterName,i=t||{},l=i.id,o=i.type,a=i.slug,u=i.collection,d=(null==t?void 0:t.user)||n,g=null!=r?r:null==t?void 0:t.name,E=v.useState(!1),V=s()(E,2),x=V[0],k=V[1],P=(0,b.T)({newsletterSlug:a,collectionSlug:null==u?void 0:u.slug,username:null==d?void 0:d.username}),M=P.viewerEdge,C=P.loading,F=(0,p.VB)({name:"enable_auto_follow_on_subscribe",placeholder:!1}),U=v.useState(!1),O=s()(U,2),_=O[0],A=O[1];v.useEffect((function(){A(!(null==M||!M.isSubscribed))}),[null==M?void 0:M.isSubscribed]);var R=(0,w.Av)(),B=(0,h.Qi)(),L=(0,S.w)();x&&R.event("newsletterV3.subscribe.error",{newsletterV3Id:l});var Y=function(e,t,n){if(n){var r={id:"User:".concat(null==d?void 0:d.id),fragment:T,fragmentName:"useNewsletterV3Subscription_user"},i=e.readFragment(r);e.writeFragment(y(y({},r),{},{data:y(y({},i),{},{newsletterV3:n})}))}if(M){var l=e.readQuery({query:b.p,variables:{newsletterSlug:a,collectionSlug:null==u?void 0:u.slug,username:null==d?void 0:d.username}}),s=c()({},l,{newsletterV3:{viewerEdge:{isSubscribed:t}}});e.writeQuery({query:b.p,variables:{newsletterSlug:a||"",collectionSlug:null==u?void 0:u.slug,username:null==d?void 0:d.username},data:s})}t&&null!=d&&d.id&&F&&(0,f.I0)(e,d.id,{isFollowing:!0})},j=(0,m.D)(I,{onCompleted:function(e){var t=e.subscribeNewsletterV3;k(!t),t&&(R.event("newsletterV3.subscribeClicked",{newsletterV3Id:l,source:B}),A(!0))},update:function(e){Y(e,!0)}}),G=s()(j,1)[0],$=(0,m.D)(N,{onCompleted:function(e){var t=e.unsubscribeNewsletterV3;k(!t),t&&(A(!1),L({duration:"NEXTPAGE",toastStyle:"NEWSLETTER_UNSUBSCRIBE",extraParams:{newsletterName:g||null,newsletterType:o||null,unsubscribeFn:function(){return A(!1)}}}))},update:function(e){Y(e,!1)}}),W=s()($,1)[0],H=(0,m.D)(D,{onCompleted:function(e){var t=e.fetchOrLazilyCreateNewsletterV3AndMaybeSubscribe;k(!t),t&&(R.event("newsletterV3.subscribeClicked",{newsletterV3Id:t.id,source:B}),A(!0))},update:function(e,t){var n,r=y({},null===(n=t.data)||void 0===n?void 0:n.fetchOrLazilyCreateNewsletterV3AndMaybeSubscribe);Y(e,!0,r)}}),z=s()(H,1)[0];return{isSubscribed:_,hasError:x,setSubscribe:function(e){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];k(!1),e&&!t&&null!=n&&n.id?z({variables:{userId:null==n?void 0:n.id}}):e&&null!=t&&t.id?G({variables:{newsletterV3Id:null==t?void 0:t.id,shouldRecordConsent:r}}):null!=t&&t.id?W({variables:{newsletterV3Id:null==t?void 0:t.id}}):k(!0)},loading:C}}},93661:(e,t,n)=>{"use strict";n.d(t,{FM:()=>l,d5:()=>m,kr:()=>v,OS:()=>p});var r,i,l,s=n(59713),o=n.n(s),a=n(66802),u=n(25735),c=n(91157);!function(e){e.Monthly="monthly",e.Yearly="yearly",e.YearlyCrossout="yearlyCrossout",e.YearlyStaff="yearlyStaff",e.YearlyPriceSaved="yearlyPriceSaved",e.YearlyStaffPriceSaved="YearlyStaffPriceSaved"}(l||(l={}));var d={CA:{plan:(r={},o()(r,l.Monthly,5),o()(r,l.Yearly,50),o()(r,l.YearlyCrossout,60),o()(r,l.YearlyStaff,1),o()(r,l.YearlyPriceSaved,10),o()(r,l.YearlyStaffPriceSaved,49),r),currency:"CAD"},US:{plan:(i={},o()(i,l.Monthly,5),o()(i,l.Yearly,50),o()(i,l.YearlyCrossout,60),o()(i,l.YearlyStaff,1),o()(i,l.YearlyPriceSaved,10),o()(i,l.YearlyStaffPriceSaved,49),i),currency:"USD"}},m=function(){var e=(0,c.x)(),t=e.loading,n=e.geolocation,r=!!(0,u.VB)({name:"enable_lite_canada_plan",placeholder:!1}),i=!t&&n&&n.country?n.country:"";return r&&"CA"===i?"CA":"US"},v=function(e){var t=e.membershipType,n=e.country,r=d[n],i=r.currency,s=r.plan[t||l.Yearly];if(!s)throw new Error("Unavailable membership price");return{amount:s,currency:i}},p=function(e){var t=e.membershipType,n=e.excludeCurrencySign,r=void 0!==n&&n,i=e.isLongFormat,l=void 0!==i&&i,s=m(),o=v({membershipType:t,country:s}),u=o.amount,c=o.currency;return r?(0,a.Hp)(u,c,l):(0,a.xG)({amount:u,currency:c,floatingDigits:[0,0],isLongFormat:l})}},9354:(e,t,n)=>{"use strict";n.d(t,{T:()=>a,p:()=>u});var r=n(28655),i=n.n(r),l=n(64718),s=n(92471);function o(){var e=i()(["\n  query NewsletterV3ViewerEdge($newsletterSlug: ID!, $collectionSlug: ID, $username: ID) {\n    newsletterV3(\n      newsletterSlug: $newsletterSlug\n      collectionSlug: $collectionSlug\n      username: $username\n    ) {\n      ... on NewsletterV3 {\n        id\n        viewerEdge {\n          id\n          isSubscribed\n        }\n      }\n    }\n  }\n"]);return o=function(){return e},e}var a=function(e){var t,n=e.newsletterSlug,r=void 0===n?"":n,i=e.collectionSlug,s=e.username,o=(0,l.a)(u,{variables:{newsletterSlug:r,collectionSlug:i,username:s},ssr:!1,skip:!r&&!s}),a=o.loading,c=o.error,d=o.data;return a?{loading:a}:c?{error:c}:{viewerEdge:null==d||null===(t=d.newsletterV3)||void 0===t?void 0:t.viewerEdge}},u=(0,s.Ps)(o())},24330:(e,t,n)=>{"use strict";n.d(t,{N:()=>u});var r=n(63038),i=n.n(r),l=n(67294),s=n(32317),o=n(71293),a=n(77355),u=function(e){var t=e.creator,n=e.followButtonSize,r=void 0===n?"REGULAR":n,u=e.shouldHideTooltip,c=void 0!==u&&u,d=e.post,m=e.showMembershipUpsellModal,v=e.showFirstUseToolTip,p=e.susiEntry,b=e.isVisible,f=e.width,w=e.isSubscribeCompact,h=void 0!==w&&w,S=l.useState(!1),g=i()(S,2),y=g[0],E=g[1];return l.createElement(l.Fragment,null,l.createElement(s.Bv,{buttonSize:r,onClick:function(){t.viewerEdge.isFollowing||E(!0)},post:d,user:t,susiEntry:p,width:f}),l.createElement(a.x,{marginLeft:h?"4px":"8px"},l.createElement(o.X,{user:t,showMembershipUpsellModal:m,showPostFollowSubscribeTooltip:y&&!c,hidePostFollowSubscribeTooltip:function(){return E(!1)},showFirstUseToolTip:v,isVisible:b,isCompact:h})))}},62685:(e,t,n)=>{"use strict";n.d(t,{$:()=>r,o:()=>V});var r,i=n(67154),l=n.n(i),s=n(63038),o=n.n(s),a=n(6479),u=n.n(a),c=n(21919),d=n(67294),m=n(98863),v=n(6443),p=n(81978),b=n(77355),f=n(93310),w=n(73917),h=n(87691),S=n(29746),g=n(18627),y=n(14646);!function(e){e.CTA="CTA",e.DISMISSED="DISMISSED"}(r||(r={}));var E=function(e){var t=e.children,n=e.flag,i=e.text,s=e.renderFn,a=e.viewer,m=e.padding,v=void 0===m?16:m,E=e.placement,V=e.darkTheme,x=e.dismissText,k=void 0===x?"Got it":x,P=e.onDismiss,M=e.preventParentClick,C=e.autoDismissFlag,T=u()(e,["children","flag","text","renderFn","viewer","padding","placement","darkTheme","dismissText","onDismiss","preventParentClick","autoDismissFlag"]),I=(0,g.Av)(),N=(0,d.useState)(!1),D=o()(N,2),F=D[0],U=D[1],O=(0,d.useRef)(!1),_=(0,c.D)(p.a,{variables:{userId:a.id,flag:n}}),A=o()(_,1)[0],R=(0,y.I)(),B=(0,d.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r.DISMISSED;U(!1),A(),P&&P(),O.current=!0,I.event("user.dismissedPopover",{flag:n,action:e})}),[F,P]);(0,d.useEffect)((function(){return U(!0)}),[]),(0,d.useEffect)((function(){if(C)return function(){O.current||A()}}),[]);var L=(0,d.useCallback)((function(){return d.createElement(b.x,{minWidth:"200px",padding:(0,S.a)(v)},d.createElement(h.F,{scale:"S",color:"WHITE"},i),d.createElement(b.x,{marginTop:"8px"},d.createElement(h.F,{scale:"S",color:V?"WHITE":void 0},d.createElement(f.r,{onClick:function(e){M&&e.preventDefault(),B(r.DISMISSED)}},d.createElement("span",{className:R(w.u)},k)))))}),[B,v,i,M]);return d.createElement(w.J,l()({disablePortalOverlay:!0,hide:B,isVisible:F,popoverRenderFn:s?s(B):L,darkTheme:!0,placement:E},T),t)},V=function(e){var t=e.children,n=e.flag,r=e.isVisible,i=void 0===r||r,s=u()(e,["children","flag","isVisible"]),o=(0,m.f)().isWorkingPreview,a=(0,v.H)().value;return o||null!=a&&a.dismissableFlags.includes(n)||!a||!i?t:d.createElement(E,l()({flag:n,viewer:a},s),t)}},71293:(e,t,n)=>{"use strict";n.d(t,{X:()=>ae,w:()=>ue});var r=n(28655),i=n.n(r),l=n(63038),s=n.n(l),o=n(92471),a=n(67294),u=n(21919),c={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"UpdateUserPostSubscribeMembershipUpsellShownAt"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"userUpdatePostSubscribeMembershipUpsellShownAt"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"postSubscribeMembershipUpsellShownAt"}}]}}]}}]},d=n(6443),m=n(14818),v=n(13791),p=n(77355),b=n(8126),f=n(87691),w=n(18627),h=n(66411),S=n(43487),g=n(87498),y=n(78870),E=n(50458),V="after_subscribe_membership_upsell",x=function(e){var t=e.user,n=e.isVisible,r=e.hide,i=(0,S.v9)((function(e){return e.config.authDomain})),l=(0,w.Av)(),o=(0,d.H)(),x=o.value,k=o.loading;a.useEffect((function(){var e;k||null!=x&&x.postSubscribeMembershipUpsellShownAt||(l.event("newsletterV3.postSubscribeMembershipUpsellViewed",{newsletterV3Id:null===(e=t.newsletterV3)||void 0===e?void 0:e.id,source:V}),M())}),[k]);var P=(0,u.D)(c,{optimisticResponse:{userUpdatePostSubscribeMembershipUpsellShownAt:{__typename:"User",id:(null==x?void 0:x.id)||"",postSubscribeMembershipUpsellShownAt:(new Date).getTime()}}}),M=s()(P,1)[0];return a.createElement(h.cW,{source:{name:V}},a.createElement(v.v,{isVisible:n,hide:r,withCloseButton:!0,withAnimation:!0,buttonStyle:"STRONG",buttonSize:"REGULAR",cancelText:"Not now",confirmText:"Become a member",onConfirm:function(){var e,n;l.event("newsletterV3.postSubscribeMembershipUpsellClicked",{newsletterV3Id:null===(e=t.newsletterV3)||void 0===e?void 0:e.id,source:V}),n=(0,y.Rk)((0,E.c5p)(i),{subscribeToUserId:t.id,source:V}),window.location.href=n},showCancelButton:!0,isDestructiveAction:!1},a.createElement(p.x,{marginBottom:"24px"},a.createElement(m.z,{miroId:t.imageId||g.gG,alt:t.name||"",diameter:80,freezeGifs:!1})),a.createElement(p.x,{marginBottom:{xs:"8px",sm:"8px",md:"16px",lg:"16px",xl:"16px"}},a.createElement(b.F1,{scale:{xs:"S",sm:"S",md:"L",lg:"L",xl:"L"}},"Youâ€™re subscribed to get email updates. Become a member for more.")),a.createElement(p.x,{marginBottom:"32px"},a.createElement(f.F,{tag:"span",scale:{xs:"M",sm:"M",md:"L",lg:"L",xl:"L"},color:"DARKER"},"Your membership fee directly supports ",t.name," and other writers you read. Get full access to every story on Medium."))))},k=n(76107),P=n(77280),M=n(61279),C=n(93661),T=n(98863),I=n(26350),N=n(43822),D=n(62685),F=n(47230),U=n(73917),O=n(26244),_=n(1383),A=n(14646),R=n(31889),B=n(34135),L=n(97217),Y=n(78285);function j(){return(j=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var G=a.createElement("path",{d:"M14 7.29L15.6 9 18 6M11.62 7.04H7a1 1 0 0 0-1 1v7.13a1 1 0 0 0 1 1h8.54a1 1 0 0 0 1-1v-3.21"}),$=a.createElement("path",{d:"M6 8.44l5.27 3.87 1.4-1.06.7-.52"});const W=function(e){return a.createElement("svg",j({width:23,height:23,viewBox:"0 0 23 23",fill:"none"},e),G,$)};function H(){return(H=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var z=a.createElement("path",{d:"M24 13l2 2 3-3.5M19.5 12.5h-7a1 1 0 0 0-1 1v11a1 1 0 0 0 1 1h13a1 1 0 0 0 1-1v-5"}),Q=a.createElement("path",{d:"M11.5 14.5L19 20l4-3"});const K=function(e){return a.createElement("svg",H({width:38,height:38,viewBox:"0 0 38 38",fill:"none"},e),z,Q)};function X(){return(X=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var q=a.createElement("path",{d:"M14.58 6.89h3.92M16.39 9V5.08M11.62 7.04H7a1 1 0 0 0-1 1v7.13a1 1 0 0 0 1 1h8.54a1 1 0 0 0 1-1v-3.21"}),J=a.createElement("path",{d:"M6 8.44l5.27 3.87 2.81-2.11"});const Z=function(e){return a.createElement("svg",X({width:23,height:23,viewBox:"0 0 23 23",fill:"none"},e),q,J)};function ee(){return(ee=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var te=a.createElement("rect",{x:26.25,y:9.25,width:.5,height:6.5,rx:.25}),ne=a.createElement("rect",{x:29.75,y:12.25,width:.5,height:6.5,rx:.25,transform:"rotate(90 29.75 12.25)"}),re=a.createElement("path",{d:"M19.5 12.5h-7a1 1 0 0 0-1 1v11a1 1 0 0 0 1 1h13a1 1 0 0 0 1-1v-5"}),ie=a.createElement("path",{d:"M11.5 14.5L19 20l4-3"});const le=function(e){return a.createElement("svg",ee({width:38,height:38,viewBox:"0 0 38 38",fill:"none"},e),te,ne,re,ie)};var se=n(68894);function oe(){var e=i()(["\n  fragment UserSubscribeButton_user on User {\n    id\n    isPartnerProgramEnrolled\n    name\n    viewerEdge {\n      id\n      isFollowing\n      isUser\n    }\n    viewerIsUser\n    newsletterV3 {\n      id\n      ...useNewsletterV3Subscription_newsletterV3\n    }\n    ...useNewsletterV3Subscription_user\n    ...MembershipUpsellModal_user\n  }\n  ","\n  ","\n  ","\n"]);return oe=function(){return e},e}var ae=function(e){var t=e.user,n=e.showFirstUseToolTip,r=void 0!==n&&n,i=e.showMembershipUpsellModal,l=void 0!==i&&i,o=e.showPostFollowSubscribeTooltip,u=void 0!==o&&o,c=e.hidePostFollowSubscribeTooltip,m=e.isVisible,v=void 0===m||m,b=e.isCompact,g=void 0!==b&&b,V=a.useRef(null),k=(0,A.I)(),j=(0,R.F)(),G=(0,d.H)().value,$=(0,se.O)(!1),H=s()($,3),z=H[0],Q=H[1],X=H[2],q=t.newsletterV3,J=(0,Y.w)(),ee=(0,w.Av)(),te=(0,h.pK)(),ne=(0,h.Qi)(),re=(0,P.PM)(),ie=(0,M.oT)({newsletterV3:q,creator:t,newsletterName:t.name||void 0}),oe=ie.isSubscribed,ae=ie.hasError,ue=ie.loading,ce=ie.setSubscribe,de=L.T3.WRITER_SUBSCRIPTIONS_TOOLTIP,me=!(null==G||!G.dismissableFlags.includes(de)),ve=(0,S.v9)((function(e){return e.config.authDomain})),pe=(0,y.Rk)((0,E.c5p)(ve),{subscribeToUserId:t.id,source:ne}),be=!(null==G||!G.mediumMemberAt),fe=a.useState(!1),we=s()(fe,2),he=we[0],Se=we[1],ge=a.useState(!1),ye=s()(ge,2),Ee=ye[0],Ve=ye[1],xe=!me&&r&&!!G&&!oe,ke=(0,h.P7)(re||"").susiEntry,Pe=void 0===ke?"":ke,Me=["newsletter_v3_promo","writer_subscription_landing"].includes(Pe),Ce=["newsletter_v3_promo"].includes(Pe),Te=(0,C.OS)({membershipType:C.FM.Monthly}),Ie=!1,Ne=function(){var e;!Ie&&v&&De()&&(ee.event("newsletterV3.subscribePresented",{newsletterV3Id:(null===(e=t.newsletterV3)||void 0===e?void 0:e.id)||"",source:te}),Ie=!0)},De=function(){var e;if(!V.current)return!1;var t=null===(e=V.current)||void 0===e?void 0:e.getBoundingClientRect(),n=t.top+t.height/2;return n>=0&&n<=window.innerHeight};a.useEffect((function(){return Ne(),window&&B.V6.on("scroll",Ne),function(){B.V6.off("scroll",Ne)}}),[]),a.useEffect((function(){Ne()}),[v]);var Fe=(0,se.O)(!1),Ue=s()(Fe,3),Oe=Ue[0],_e=Ue[1],Ae=Ue[2],Re=function(e,t){var n=(0,d.H)(),r=n.value,i=n.loading,l=a.useRef(null),s=!(null==r||!r.mediumMemberAt),o=(0,P.PM)(),u=(0,h.P7)(o||"").susiEntry,c=["newsletter_v3_promo","writer_subscription_landing","subscribe_user"].includes(void 0===u?"":u);if(i)return!1;if(null!==l.current)return l.current;var m=c&&!s&&!e.viewerEdge.isUser&&!!e.isPartnerProgramEnrolled&&!(null!=r&&r.postSubscribeMembershipUpsellShownAt);return l.current=m,m}(t),Be=a.useState(!1),Le=s()(Be,2),Ye=Le[0],je=Le[1];a.useEffect((function(){l&&oe&&!Ye&&Re?_e():Ae()}),[oe,Ye,Re]),a.useEffect((function(){re&&!Re&&Me&&oe&&(!Ce&&ne===Pe||Ce)&&J({duration:"NEXTPAGE",toastStyle:"NEWSLETTER_SUBSCRIBE",extraParams:{newsletterName:t.name,newsletterType:L.Rr.NEWSLETTER_TYPE_AUTHOR,unsubscribeFn:function(){return ce(!1)}}})}),[re,oe]),a.useEffect((function(){if(oe&&Ee&&q){var e=!be&&!!t.isPartnerProgramEnrolled;e&&ee.event("newsletterV3.postSubscribeMembershipUpsellViewed",{newsletterV3Id:q.id,source:ne}),Se(e),Ve(!1)}}),[oe,Ee,q]);var Ge=(0,T.f)().isWorkingPreview;if(ae||t.viewerEdge.isUser&&!Ge)return null;var $e,We=oe?"OBVIOUS":"STRONG",He=function(e,t){return function(n){return{stroke:t?n.baseColor.background.normal:e,height:g?"23px":"36px",width:g?"23px":"36px"}}},ze=k(He(j.accentColor.fill.normal,ue)),Qe=k(He(j.accentColor.background,ue));$e=oe?g?a.createElement(W,{className:ze}):a.createElement(K,{className:ze}):g?a.createElement(Z,{className:Qe}):a.createElement(le,{className:Qe});var Ke=a.createElement(F.z,{loading:ue,buttonStyle:We,onClick:function(){var e;Ve(!oe),G?oe?ce(!1):G&&G.allowEmailAddressSharingEditorWriter?ce(!0,!1):Q():null!==(e=t.newsletterV3)&&void 0!==e&&e.id?ee.event("newsletterV3.subscribeClicked",{newsletterV3Id:t.newsletterV3.id,source:ne}):ee.event("user.LOSubscribeClicked",{targetUserId:t.id,source:ne})},padding:"0","aria-label":"Subscribe"},$e),Xe=function(){return a.createElement(p.x,{padding:"14px 12px 20px",maxWidth:"220px"},a.createElement(f.F,{tag:"div",scale:"S",color:"DARKER"},a.createElement("strong",null,"You're subscribed to ",t.name,". Become a member for more.")," Get full access to every story on Medium for ",Te," a month."),a.createElement(p.x,{paddingTop:"8px"},a.createElement(N.a,{isButton:!0,buttonStyle:"STRONG",buttonSize:"SMALL",redirectUrl:pe,width:"150px",onClick:function(){ee.event("newsletterV3.postSubscribeMembershipUpsellClicked",{newsletterV3Id:q.id,source:ne})}},a.createElement(p.x,{textAlign:"center"},a.createElement(f.F,{scale:"S",color:"WHITE"},"Become a member")))))},qe=function(){return a.createElement(p.x,{padding:"10px 12px",maxWidth:"166px"},a.createElement(f.F,{tag:"div",scale:"S",color:"DARKER"},"Subscribe to get an email whenever ",t.name," publishes."))},Je=function(e){var t=e.children;return a.createElement(U.J,{isVisible:!!c&&!oe,hide:c,placement:"bottom",popoverRenderFn:qe,targetDistance:10,role:"tooltip"},t)},Ze=function(e){var t=e.children;return a.createElement(U.J,{isVisible:!ue&&he,hide:function(){return Se(!1)},placement:"bottom",popoverRenderFn:Xe,targetDistance:10,role:"tooltip"},t)},et=function(e){var t=e.children;return a.createElement(O.$,{isVisible:!ue&&!oe,hideOnClick:!0,noPortal:!0,mouseEnterDelay:500,mouseLeaveDelay:0,placement:"bottom",popoverRenderFn:qe,role:"tooltip",targetDistance:10},t)},tt=function(e){var t=e.children;return a.createElement(D.o,{isVisible:!ue,flag:de,targetDistance:10,text:"You can now subscribe to get stories delivered directly to your inbox.",darkTheme:!0},t)},nt=function(e){var t=e.children;return xe?a.createElement(tt,null,t):u&&!oe?a.createElement(Je,null,t):he?a.createElement(Ze,null,t):a.createElement(et,null,t)};return a.createElement("div",{ref:V},a.createElement(nt,null,a.createElement(p.x,null,G&&a.createElement(_.Q,{onConfirm:function(){ce(!0,!0)},isVisible:z,hide:X,titleText:"Confirm your subscription to ".concat(t.name),confirmText:"Confirm now",buttonStyle:"STRONG",buttonSize:"LARGE",showCancelButton:!1,withCloseButton:!1,isDestructiveAction:!1},"When you subscribe to a writer or publication, your email address will be shared with them so they can stay in contact with you outside of Medium. Opt out any time by unsubscribing in Settings."),G?Ke:a.createElement(I.R,{operation:"register",newsletterV3:q,user:t,actionUrl:q?(0,E.Zul)(q.id):(0,E.lcz)(t.id),susiEntry:"subscribe_user"},Ke))),Oe&&a.createElement(x,{user:t,isVisible:Oe,hide:function(){je(!0),Ae()}}))},ue=(0,o.Ps)(oe(),M.DI,M.nj,k.b)}}]);
//# sourceMappingURL=https://stats.medium.build/lite/sourcemaps/4330.531c256f.chunk.js.map